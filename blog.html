<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Blog - PosturaIA</title>
    <link rel="stylesheet" href="assets/css/theme.css">
</head>
<body>
    <header id="main-header"></header>
    <main style="max-width: 1000px; margin: 2rem auto; padding: 0 1rem;">
        <h1 style="margin-bottom: 2rem; color: var(--primary);">Blog PosturaIA</h1>
        <div id="blog-list" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
            <div style="padding: 2rem; text-align: center; color: #999;">Chargement des articles...</div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module">
        import "./assets/js/ui-orchestrator.js";
        
        async function loadBlog() {
            const container = document.getElementById('blog-list');
            try {
                const response = await fetch('assets/blog/posts.json');
                const posts = await response.json();
                const lang = localStorage.getItem('posturaia_lang') || 'fr';
                const filteredPosts = posts.filter(p => p.lang === lang);

                if (filteredPosts.length === 0) {
                    container.innerHTML = `<p>Aucun article disponible pour le moment.</p>`;
                    return;
                }

                container.innerHTML = filteredPosts.map(p => `
                    <div class="card" style="padding: 0; overflow: hidden; display: flex; flex-direction: column; border: 1px solid var(--border); border-radius: 8px;">
                        ${p.hero_image ? `<img src="${p.hero_image}" alt="${p.title}" style="width: 100%; height: 200px; object-fit: cover;">` : `<div style="width: 100%; height: 200px; background: #eee; display: flex; align-items: center; justify-content: center; color: #ccc;">PosturaIA</div>`}
                        <div style="padding: 1.5rem; flex-grow: 1;">
                            <h3 style="margin-bottom: 0.5rem; color: var(--primary);">${p.title}</h3>
                            <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">${p.excerpt}</p>
                            <a href="blog-post.html?id=${p.id}" class="btn btn-outline" style="width: 100%; text-align: center; display: block; border: 1px solid var(--secondary); padding: 8px; border-radius: 4px; color: var(--secondary); text-decoration: none;">Lire la suite</a>
                        </div>
                    </div>
                `).join('');
            } catch (e) {
                console.error("Blog load error:", e);
                container.innerHTML = `<p>Erreur lors du chargement du blog.</p>`;
            }
        }
        loadBlog();
    </script>
</body>
</html>
